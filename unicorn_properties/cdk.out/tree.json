{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.201.0"},"children":{"uni-prop-local-properties-events":{"id":"uni-prop-local-properties-events","path":"uni-prop-local-properties-events","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.201.0"},"children":{"UnicornPropertiesBus-local":{"id":"UnicornPropertiesBus-local","path":"uni-prop-local-properties-events/UnicornPropertiesBus-local","constructInfo":{"fqn":"aws-cdk-lib.aws_events.EventBus","version":"2.201.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"uni-prop-local-properties-events/UnicornPropertiesBus-local/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnEventBus","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::EventBus","aws:cdk:cloudformation:props":{"tags":[{"key":"namespace","value":"unicorn.properties"},{"key":"project","value":"AWS Serverless Developer Experience"},{"key":"stage","value":"local"}],"name":"UnicornPropertiesBus-local"}}},"cdk-AllowSubscribersToCreateSubscriptionRules-properties-local":{"id":"cdk-AllowSubscribersToCreateSubscriptionRules-properties-local","path":"uni-prop-local-properties-events/UnicornPropertiesBus-local/cdk-AllowSubscribersToCreateSubscriptionRules-properties-local","constructInfo":{"fqn":"aws-cdk-lib.aws_events.EventBusPolicy","version":"2.201.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"uni-prop-local-properties-events/UnicornPropertiesBus-local/cdk-AllowSubscribersToCreateSubscriptionRules-properties-local/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnEventBusPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::EventBusPolicy","aws:cdk:cloudformation:props":{"eventBusName":{"Ref":"UnicornPropertiesBuslocal2042F62D"},"statement":{"Action":["events:*Rule","events:*Targets"],"Condition":{"StringEqualsIfExists":{"events:creatorAccount":"491085425146"}},"Effect":"Allow","Principal":{"AWS":"arn:aws:iam::491085425146:root"},"Resource":{"Fn::GetAtt":["UnicornPropertiesBuslocal2042F62D","Arn"]},"Sid":"cdk-AllowSubscribersToCreateSubscriptionRules-properties-local"},"statementId":"cdk-AllowSubscribersToCreateSubscriptionRules-properties-local"}}}}}}},"UnicornPropertiesEventsBusPublishPolicy":{"id":"UnicornPropertiesEventsBusPublishPolicy","path":"uni-prop-local-properties-events/UnicornPropertiesEventsBusPublishPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnEventBusPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::EventBusPolicy","aws:cdk:cloudformation:props":{"eventBusName":{"Ref":"UnicornPropertiesBuslocal2042F62D"},"statement":{"Action":"events:PutEvents","Condition":{"StringEquals":{"events:source":"unicorn.properties"}},"Effect":"Allow","Principal":{"AWS":"arn:aws:iam::491085425146:root"},"Resource":{"Fn::GetAtt":["UnicornPropertiesBuslocal2042F62D","Arn"]}},"statementId":"OnlyPropertiesServiceCanPublishToEventBus-local"}}},"UnicornPropertiesEventBus":{"id":"UnicornPropertiesEventBus","path":"uni-prop-local-properties-events/UnicornPropertiesEventBus","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.201.0"}},"--uni-prop--local--UnicornPropertiesEventBusParameter":{"id":"--uni-prop--local--UnicornPropertiesEventBusParameter","path":"uni-prop-local-properties-events/--uni-prop--local--UnicornPropertiesEventBusParameter","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.201.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"uni-prop-local-properties-events/--uni-prop--local--UnicornPropertiesEventBusParameter/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"name":"/uni-prop/local/UnicornPropertiesEventBus","tags":{"namespace":"unicorn.properties","project":"AWS Serverless Developer Experience","stage":"local"},"type":"String","value":{"Ref":"UnicornPropertiesBuslocal2042F62D"}}}}}},"UnicornPropertiesEventBusArn":{"id":"UnicornPropertiesEventBusArn","path":"uni-prop-local-properties-events/UnicornPropertiesEventBusArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.201.0"}},"--uni-prop--local--UnicornPropertiesEventBusArnParameter":{"id":"--uni-prop--local--UnicornPropertiesEventBusArnParameter","path":"uni-prop-local-properties-events/--uni-prop--local--UnicornPropertiesEventBusArnParameter","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.201.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"uni-prop-local-properties-events/--uni-prop--local--UnicornPropertiesEventBusArnParameter/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"name":"/uni-prop/local/UnicornPropertiesEventBusArn","tags":{"namespace":"unicorn.properties","project":"AWS Serverless Developer Experience","stage":"local"},"type":"String","value":{"Fn::GetAtt":["UnicornPropertiesBuslocal2042F62D","Arn"]}}}}}},"UnicornPropertiesCatchAllLogGroup":{"id":"UnicornPropertiesCatchAllLogGroup","path":"uni-prop-local-properties-events/UnicornPropertiesCatchAllLogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"uni-prop-local-properties-events/UnicornPropertiesCatchAllLogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":"/aws/events/local/unicorn.properties-catchall","retentionInDays":1,"tags":[{"key":"namespace","value":"unicorn.properties"},{"key":"project","value":"AWS Serverless Developer Experience"},{"key":"stage","value":"local"}]}}}}},"properties.catchall":{"id":"properties.catchall","path":"uni-prop-local-properties-events/properties.catchall","constructInfo":{"fqn":"aws-cdk-lib.aws_events.Rule","version":"2.201.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"uni-prop-local-properties-events/properties.catchall/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnRule","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::Rule","aws:cdk:cloudformation:props":{"description":"Catch all events published by the unicorn.properties service.","eventBusName":{"Ref":"UnicornPropertiesBuslocal2042F62D"},"eventPattern":{"account":["491085425146"],"source":["unicorn.properties"]},"name":"properties.catchall","state":"ENABLED","targets":[{"id":"Target0","arn":{"Fn::Join":["",["arn:aws:logs:eu-central-1:491085425146:log-group:",{"Ref":"UnicornPropertiesCatchAllLogGroup057F9994"}]]}}]}}}}},"EventsLogGroupPolicyuniproplocalpropertieseventspropertiescatchallF3715F6B":{"id":"EventsLogGroupPolicyuniproplocalpropertieseventspropertiescatchallF3715F6B","path":"uni-prop-local-properties-events/EventsLogGroupPolicyuniproplocalpropertieseventspropertiescatchallF3715F6B","constructInfo":{"fqn":"aws-cdk-lib.custom_resources.AwsCustomResource","version":"2.201.0"},"children":{"Provider":{"id":"Provider","path":"uni-prop-local-properties-events/EventsLogGroupPolicyuniproplocalpropertieseventspropertiescatchallF3715F6B/Provider","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.SingletonFunction","version":"2.201.0","metadata":[]}},"Resource":{"id":"Resource","path":"uni-prop-local-properties-events/EventsLogGroupPolicyuniproplocalpropertieseventspropertiescatchallF3715F6B/Resource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.201.0","metadata":[]},"children":{"Default":{"id":"Default","path":"uni-prop-local-properties-events/EventsLogGroupPolicyuniproplocalpropertieseventspropertiescatchallF3715F6B/Resource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.201.0"}}}},"CustomResourcePolicy":{"id":"CustomResourcePolicy","path":"uni-prop-local-properties-events/EventsLogGroupPolicyuniproplocalpropertieseventspropertiescatchallF3715F6B/CustomResourcePolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"uni-prop-local-properties-events/EventsLogGroupPolicyuniproplocalpropertieseventspropertiescatchallF3715F6B/CustomResourcePolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:DeleteResourcePolicy","logs:PutResourcePolicy"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"EventsLogGroupPolicyuniproplocalpropertieseventspropertiescatchallF3715F6BCustomResourcePolicy00A429FA","roles":[{"Ref":"AWS679f53fac002430cb0da5b7982bd2287ServiceRoleC1EA0FF2"}]}}}}}}},"AWS679f53fac002430cb0da5b7982bd2287":{"id":"AWS679f53fac002430cb0da5b7982bd2287","path":"uni-prop-local-properties-events/AWS679f53fac002430cb0da5b7982bd2287","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"uni-prop-local-properties-events/AWS679f53fac002430cb0da5b7982bd2287/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"uni-prop-local-properties-events/AWS679f53fac002430cb0da5b7982bd2287/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":[]}},"Resource":{"id":"Resource","path":"uni-prop-local-properties-events/AWS679f53fac002430cb0da5b7982bd2287/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"namespace","value":"unicorn.properties"},{"key":"project","value":"AWS Serverless Developer Experience"},{"key":"stage","value":"local"}]}}}}},"Code":{"id":"Code","path":"uni-prop-local-properties-events/AWS679f53fac002430cb0da5b7982bd2287/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"uni-prop-local-properties-events/AWS679f53fac002430cb0da5b7982bd2287/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"uni-prop-local-properties-events/AWS679f53fac002430cb0da5b7982bd2287/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"uni-prop-local-properties-events/AWS679f53fac002430cb0da5b7982bd2287/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-491085425146-eu-central-1","s3Key":"c099eb4e32cbf1c3da9c45a3b280efe2bed38d27d74aa72702b67d86d1b52354.zip"},"handler":"index.handler","role":{"Fn::GetAtt":["AWS679f53fac002430cb0da5b7982bd2287ServiceRoleC1EA0FF2","Arn"]},"runtime":"nodejs22.x","tags":[{"key":"namespace","value":"unicorn.properties"},{"key":"project","value":"AWS Serverless Developer Experience"},{"key":"stage","value":"local"}],"timeout":120}}}}},"UnicornPropertiesCatchAllLogGroupName":{"id":"UnicornPropertiesCatchAllLogGroupName","path":"uni-prop-local-properties-events/UnicornPropertiesCatchAllLogGroupName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.201.0"}},"UnicornPropertiesCatchAllLogGroupArn":{"id":"UnicornPropertiesCatchAllLogGroupArn","path":"uni-prop-local-properties-events/UnicornPropertiesCatchAllLogGroupArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.201.0"}},"EventRegistry":{"id":"EventRegistry","path":"uni-prop-local-properties-events/EventRegistry","constructInfo":{"fqn":"aws-cdk-lib.aws_eventschemas.CfnRegistry","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EventSchemas::Registry","aws:cdk:cloudformation:props":{"description":"Event schemas for Unicorn Properties local","registryName":"unicorn.properties-local","tags":[{"key":"namespace","value":"unicorn.properties"},{"key":"project","value":"AWS Serverless Developer Experience"},{"key":"stage","value":"local"}]}}},"RegistryPolicy":{"id":"RegistryPolicy","path":"uni-prop-local-properties-events/RegistryPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_eventschemas.CfnRegistryPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EventSchemas::RegistryPolicy","aws:cdk:cloudformation:props":{"policy":{"Statement":[{"Action":["schemas:DescribeCodeBinding","schemas:DescribeRegistry","schemas:DescribeSchema","schemas:GetCodeBindingSource","schemas:ListSchemas","schemas:ListSchemaVersions","schemas:SearchSchemas"],"Effect":"Allow","Principal":{"AWS":"arn:aws:iam::491085425146:root"},"Resource":[{"Fn::GetAtt":["EventRegistry","RegistryArn"]},{"Fn::Join":["",["arn:aws:schemas:eu-central-1:491085425146:schema/",{"Fn::GetAtt":["EventRegistry","RegistryName"]},"*"]]}],"Sid":"AllowExternalServices"}],"Version":"2012-10-17"},"registryName":{"Fn::GetAtt":["EventRegistry","RegistryName"]}}}},"CDKMetadata":{"id":"CDKMetadata","path":"uni-prop-local-properties-events/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"uni-prop-local-properties-events/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.201.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"uni-prop-local-properties-events/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.201.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"uni-prop-local-properties-events/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.201.0"}}}},"uni-prop-local-properties-contracts":{"id":"uni-prop-local-properties-contracts","path":"uni-prop-local-properties-contracts","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.201.0"},"children":{"SsmParameterValue:--uni-prop--local--UnicornPropertiesEventBus:C96584B6-F00A-464E-AD19-53AFF4B05118.Parameter":{"id":"SsmParameterValue:--uni-prop--local--UnicornPropertiesEventBus:C96584B6-F00A-464E-AD19-53AFF4B05118.Parameter","path":"uni-prop-local-properties-contracts/SsmParameterValue:--uni-prop--local--UnicornPropertiesEventBus:C96584B6-F00A-464E-AD19-53AFF4B05118.Parameter","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.201.0"}},"SsmParameterValue:--uni-prop--local--UnicornPropertiesEventBus:C96584B6-F00A-464E-AD19-53AFF4B05118":{"id":"SsmParameterValue:--uni-prop--local--UnicornPropertiesEventBus:C96584B6-F00A-464E-AD19-53AFF4B05118","path":"uni-prop-local-properties-contracts/SsmParameterValue:--uni-prop--local--UnicornPropertiesEventBus:C96584B6-F00A-464E-AD19-53AFF4B05118","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":[]}},"PropertiesEventBus":{"id":"PropertiesEventBus","path":"uni-prop-local-properties-contracts/PropertiesEventBus","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":[]}},"ContractStatusTable":{"id":"ContractStatusTable","path":"uni-prop-local-properties-contracts/ContractStatusTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.TableV2","version":"2.201.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"uni-prop-local-properties-contracts/ContractStatusTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnGlobalTable","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::GlobalTable","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"property_id","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","keySchema":[{"attributeName":"property_id","keyType":"HASH"}],"replicas":[{"region":"eu-central-1","tags":[{"key":"namespace","value":"unicorn.properties"},{"key":"project","value":"AWS Serverless Developer Experience"},{"key":"stage","value":"local"}]}],"streamSpecification":{"streamViewType":"NEW_AND_OLD_IMAGES"},"tableName":"uni-prop-local-properties-ContractStatusTable"}}}}},"ContractStatusTableName":{"id":"ContractStatusTableName","path":"uni-prop-local-properties-contracts/ContractStatusTableName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.201.0"}},"--uni-prop--local--ContractStatusTableNameParameter":{"id":"--uni-prop--local--ContractStatusTableNameParameter","path":"uni-prop-local-properties-contracts/--uni-prop--local--ContractStatusTableNameParameter","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.201.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"uni-prop-local-properties-contracts/--uni-prop--local--ContractStatusTableNameParameter/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"description":"DynamoDB table storing contract status information","name":"/uni-prop/local/ContractStatusTableName","tags":{"namespace":"unicorn.properties","project":"AWS Serverless Developer Experience","stage":"local"},"type":"String","value":{"Ref":"ContractStatusTableF5E34442"}}}}}},"PropertiesServiceDlq":{"id":"PropertiesServiceDlq","path":"uni-prop-local-properties-contracts/PropertiesServiceDlq","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.Queue","version":"2.201.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"uni-prop-local-properties-contracts/PropertiesServiceDlq/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueue","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::Queue","aws:cdk:cloudformation:props":{"messageRetentionPeriod":1209600,"queueName":"PropertiesServiceDlq-local","sqsManagedSseEnabled":true,"tags":[{"key":"namespace","value":"unicorn.properties"},{"key":"project","value":"AWS Serverless Developer Experience"},{"key":"stage","value":"local"}]}}}}},"ContractStatusChangedEventsDlq":{"id":"ContractStatusChangedEventsDlq","path":"uni-prop-local-properties-contracts/ContractStatusChangedEventsDlq","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.Queue","version":"2.201.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"uni-prop-local-properties-contracts/ContractStatusChangedEventsDlq/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueue","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::Queue","aws:cdk:cloudformation:props":{"messageRetentionPeriod":1209600,"queueName":"ContractStatusChangedEventsDlq-local","sqsManagedSseEnabled":true,"tags":[{"key":"namespace","value":"unicorn.properties"},{"key":"project","value":"AWS Serverless Developer Experience"},{"key":"stage","value":"local"}]}}},"Policy":{"id":"Policy","path":"uni-prop-local-properties-contracts/ContractStatusChangedEventsDlq/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.QueuePolicy","version":"2.201.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"uni-prop-local-properties-contracts/ContractStatusChangedEventsDlq/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueuePolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::QueuePolicy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"sqs:SendMessage","Condition":{"ArnEquals":{"aws:SourceArn":{"Fn::GetAtt":["unicornpropertiesContractStatusChanged15A011AE","Arn"]}}},"Effect":"Allow","Principal":{"Service":"events.amazonaws.com"},"Resource":{"Fn::GetAtt":["ContractStatusChangedEventsDlq804439A8","Arn"]},"Sid":"AllowEventRuleuniproplocalpropertiescontractsunicornpropertiesContractStatusChanged8E7E8ACC"}],"Version":"2012-10-17"},"queues":[{"Ref":"ContractStatusChangedEventsDlq804439A8"}]}}}}}}},"UnicornContractsLayer":{"id":"UnicornContractsLayer","path":"uni-prop-local-properties-contracts/UnicornContractsLayer","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":[]}},"ContractStatusChangedHandlerFunctionLogGroup":{"id":"ContractStatusChangedHandlerFunctionLogGroup","path":"uni-prop-local-properties-contracts/ContractStatusChangedHandlerFunctionLogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"uni-prop-local-properties-contracts/ContractStatusChangedHandlerFunctionLogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"retentionInDays":1,"tags":[{"key":"namespace","value":"unicorn.properties"},{"key":"project","value":"AWS Serverless Developer Experience"},{"key":"stage","value":"local"}]}}}}},"ContractEventHandlerFunction-local":{"id":"ContractEventHandlerFunction-local","path":"uni-prop-local-properties-contracts/ContractEventHandlerFunction-local","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"uni-prop-local-properties-contracts/ContractEventHandlerFunction-local/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"uni-prop-local-properties-contracts/ContractEventHandlerFunction-local/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":[]}},"Resource":{"id":"Resource","path":"uni-prop-local-properties-contracts/ContractEventHandlerFunction-local/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"namespace","value":"unicorn.properties"},{"key":"project","value":"AWS Serverless Developer Experience"},{"key":"stage","value":"local"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"uni-prop-local-properties-contracts/ContractEventHandlerFunction-local/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"uni-prop-local-properties-contracts/ContractEventHandlerFunction-local/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"sqs:SendMessage","Effect":"Allow","Resource":{"Fn::GetAtt":["PropertiesServiceDlq30F985E8","Arn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":{"Fn::GetAtt":["ContractStatusTableF5E34442","Arn"]}}],"Version":"2012-10-17"},"policyName":"ContractEventHandlerFunctionlocalServiceRoleDefaultPolicy2230085D","roles":[{"Ref":"ContractEventHandlerFunctionlocalServiceRole1EB5415C"}]}}}}}}},"Code":{"id":"Code","path":"uni-prop-local-properties-contracts/ContractEventHandlerFunction-local/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"uni-prop-local-properties-contracts/ContractEventHandlerFunction-local/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"uni-prop-local-properties-contracts/ContractEventHandlerFunction-local/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"uni-prop-local-properties-contracts/ContractEventHandlerFunction-local/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-491085425146-eu-central-1","s3Key":"a5ff454d353fbdeee4d841897d4ef58a793fdb423d0bb795170826dd4b93c15e.zip"},"deadLetterConfig":{"targetArn":{"Fn::GetAtt":["PropertiesServiceDlq30F985E8","Arn"]}},"environment":{"variables":{"TABLE_NAME":{"Ref":"ContractStatusTableF5E34442"},"STAGE":"local","SERVICE_NAMESPACE":"unicorn.properties"}},"handler":"properties_service.contract_status_changed_event_function.lambda_handler","layers":[{"Fn::Join":["",["arn:aws:lambda:",{"Ref":"AWS::Region"},":017000801446:layer:AWSLambdaPowertoolsPythonV3-python313-x86_64:4"]]}],"loggingConfig":{"logGroup":{"Ref":"ContractStatusChangedHandlerFunctionLogGroup4305EDF3"}},"role":{"Fn::GetAtt":["ContractEventHandlerFunctionlocalServiceRole1EB5415C","Arn"]},"runtime":"python3.13","tags":[{"key":"namespace","value":"unicorn.properties"},{"key":"project","value":"AWS Serverless Developer Experience"},{"key":"stage","value":"local"}]}}}}},"unicorn.properties-ContractStatusChanged":{"id":"unicorn.properties-ContractStatusChanged","path":"uni-prop-local-properties-contracts/unicorn.properties-ContractStatusChanged","constructInfo":{"fqn":"aws-cdk-lib.aws_events.Rule","version":"2.201.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"uni-prop-local-properties-contracts/unicorn.properties-ContractStatusChanged/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnRule","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::Rule","aws:cdk:cloudformation:props":{"description":"ContractStatusChanged events published by the unicorn.contracts service.","eventBusName":{"Ref":"SsmParameterValueuniproplocalUnicornPropertiesEventBusC96584B6F00A464EAD1953AFF4B05118Parameter"},"eventPattern":{"detail-type":["ContractStatusChanged"],"source":["unicorn.contracts"]},"name":"unicorn.properties-ContractStatusChanged","state":"ENABLED","targets":[{"id":"Target0","arn":{"Fn::GetAtt":["ContractEventHandlerFunctionlocal38E947E4","Arn"]},"deadLetterConfig":{"arn":{"Fn::GetAtt":["ContractStatusChangedEventsDlq804439A8","Arn"]}},"retryPolicy":{"maximumRetryAttempts":5,"maximumEventAgeInSeconds":900}}]}}},"AllowEventRuleuniproplocalpropertiescontractsContractEventHandlerFunctionlocal4DA4134A":{"id":"AllowEventRuleuniproplocalpropertiescontractsContractEventHandlerFunctionlocal4DA4134A","path":"uni-prop-local-properties-contracts/unicorn.properties-ContractStatusChanged/AllowEventRuleuniproplocalpropertiescontractsContractEventHandlerFunctionlocal4DA4134A","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ContractEventHandlerFunctionlocal38E947E4","Arn"]},"principal":"events.amazonaws.com","sourceArn":{"Fn::GetAtt":["unicornpropertiesContractStatusChanged15A011AE","Arn"]}}}}}},"ContractEventHandlerFunction":{"id":"ContractEventHandlerFunction","path":"uni-prop-local-properties-contracts/ContractEventHandlerFunction","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.201.0"}},"PropertiesApprovalSyncFunctionLogGroup":{"id":"PropertiesApprovalSyncFunctionLogGroup","path":"uni-prop-local-properties-contracts/PropertiesApprovalSyncFunctionLogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"uni-prop-local-properties-contracts/PropertiesApprovalSyncFunctionLogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"retentionInDays":1,"tags":[{"key":"namespace","value":"unicorn.properties"},{"key":"project","value":"AWS Serverless Developer Experience"},{"key":"stage","value":"local"}]}}}}},"PropertiesApprovalSyncFunction-local":{"id":"PropertiesApprovalSyncFunction-local","path":"uni-prop-local-properties-contracts/PropertiesApprovalSyncFunction-local","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"uni-prop-local-properties-contracts/PropertiesApprovalSyncFunction-local/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"uni-prop-local-properties-contracts/PropertiesApprovalSyncFunction-local/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":[]}},"Resource":{"id":"Resource","path":"uni-prop-local-properties-contracts/PropertiesApprovalSyncFunction-local/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"namespace","value":"unicorn.properties"},{"key":"project","value":"AWS Serverless Developer Experience"},{"key":"stage","value":"local"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"uni-prop-local-properties-contracts/PropertiesApprovalSyncFunction-local/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"uni-prop-local-properties-contracts/PropertiesApprovalSyncFunction-local/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["PropertiesServiceDlq30F985E8","Arn"]}},{"Action":["dynamodb:DescribeStream","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:ListStreams"],"Effect":"Allow","Resource":{"Fn::GetAtt":["ContractStatusTableF5E34442","StreamArn"]}},{"Action":["dynamodb:BatchGetItem","dynamodb:ConditionCheckItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:Scan"],"Effect":"Allow","Resource":{"Fn::GetAtt":["ContractStatusTableF5E34442","Arn"]}}],"Version":"2012-10-17"},"policyName":"PropertiesApprovalSyncFunctionlocalServiceRoleDefaultPolicy62DB4FC9","roles":[{"Ref":"PropertiesApprovalSyncFunctionlocalServiceRole0C471955"}]}}}}}}},"Code":{"id":"Code","path":"uni-prop-local-properties-contracts/PropertiesApprovalSyncFunction-local/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"uni-prop-local-properties-contracts/PropertiesApprovalSyncFunction-local/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"uni-prop-local-properties-contracts/PropertiesApprovalSyncFunction-local/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"uni-prop-local-properties-contracts/PropertiesApprovalSyncFunction-local/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-491085425146-eu-central-1","s3Key":"a5ff454d353fbdeee4d841897d4ef58a793fdb423d0bb795170826dd4b93c15e.zip"},"deadLetterConfig":{"targetArn":{"Fn::GetAtt":["PropertiesServiceDlq30F985E8","Arn"]}},"environment":{"variables":{"TABLE_NAME":{"Ref":"ContractStatusTableF5E34442"},"STAGE":"local","SERVICE_NAMESPACE":"unicorn.properties"}},"handler":"properties_service.properties_approval_sync_function.lambda_handler","layers":[{"Fn::Join":["",["arn:aws:lambda:",{"Ref":"AWS::Region"},":017000801446:layer:AWSLambdaPowertoolsPythonV3-python313-x86_64:4"]]}],"loggingConfig":{"logGroup":{"Ref":"PropertiesApprovalSyncFunctionLogGroupABE7E9A1"}},"role":{"Fn::GetAtt":["PropertiesApprovalSyncFunctionlocalServiceRole0C471955","Arn"]},"runtime":"python3.13","tags":[{"key":"namespace","value":"unicorn.properties"},{"key":"project","value":"AWS Serverless Developer Experience"},{"key":"stage","value":"local"}]}}},"DynamoDBEventSource:uniproplocalpropertiescontractsContractStatusTableEAF3CC44":{"id":"DynamoDBEventSource:uniproplocalpropertiescontractsContractStatusTableEAF3CC44","path":"uni-prop-local-properties-contracts/PropertiesApprovalSyncFunction-local/DynamoDBEventSource:uniproplocalpropertiescontractsContractStatusTableEAF3CC44","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.EventSourceMapping","version":"2.201.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"uni-prop-local-properties-contracts/PropertiesApprovalSyncFunction-local/DynamoDBEventSource:uniproplocalpropertiescontractsContractStatusTableEAF3CC44/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnEventSourceMapping","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::EventSourceMapping","aws:cdk:cloudformation:props":{"batchSize":100,"tags":[{"key":"namespace","value":"unicorn.properties"},{"key":"project","value":"AWS Serverless Developer Experience"},{"key":"stage","value":"local"}],"destinationConfig":{"onFailure":{"destination":{"Fn::GetAtt":["PropertiesServiceDlq30F985E8","Arn"]}}},"eventSourceArn":{"Fn::GetAtt":["ContractStatusTableF5E34442","StreamArn"]},"functionName":{"Ref":"PropertiesApprovalSyncFunctionlocal69C8A5CE"},"startingPosition":"TRIM_HORIZON"}}}}}}},"PropertiesApprovalSyncFunctionIamRoleArn":{"id":"PropertiesApprovalSyncFunctionIamRoleArn","path":"uni-prop-local-properties-contracts/PropertiesApprovalSyncFunctionIamRoleArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.201.0"}},"--uni-prop--local--PropertiesApprovalSyncFunctionIamRoleArnParameter":{"id":"--uni-prop--local--PropertiesApprovalSyncFunctionIamRoleArnParameter","path":"uni-prop-local-properties-contracts/--uni-prop--local--PropertiesApprovalSyncFunctionIamRoleArnParameter","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.StringParameter","version":"2.201.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"uni-prop-local-properties-contracts/--uni-prop--local--PropertiesApprovalSyncFunctionIamRoleArnParameter/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ssm.CfnParameter","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SSM::Parameter","aws:cdk:cloudformation:props":{"name":"/uni-prop/local/PropertiesApprovalSyncFunctionIamRoleArn","tags":{"namespace":"unicorn.properties","project":"AWS Serverless Developer Experience","stage":"local"},"type":"String","value":{"Fn::GetAtt":["PropertiesApprovalSyncFunctionlocalServiceRole0C471955","Arn"]}}}}}},"CDKMetadata":{"id":"CDKMetadata","path":"uni-prop-local-properties-contracts/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"uni-prop-local-properties-contracts/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.201.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"uni-prop-local-properties-contracts/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.201.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"uni-prop-local-properties-contracts/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.201.0"}}}},"uni-prop-local-properties-approval":{"id":"uni-prop-local-properties-approval","path":"uni-prop-local-properties-approval","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.201.0"},"children":{"SsmParameterValue:--uni-prop--local--UnicornPropertiesEventBus:C96584B6-F00A-464E-AD19-53AFF4B05118.Parameter":{"id":"SsmParameterValue:--uni-prop--local--UnicornPropertiesEventBus:C96584B6-F00A-464E-AD19-53AFF4B05118.Parameter","path":"uni-prop-local-properties-approval/SsmParameterValue:--uni-prop--local--UnicornPropertiesEventBus:C96584B6-F00A-464E-AD19-53AFF4B05118.Parameter","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.201.0"}},"SsmParameterValue:--uni-prop--local--UnicornPropertiesEventBus:C96584B6-F00A-464E-AD19-53AFF4B05118":{"id":"SsmParameterValue:--uni-prop--local--UnicornPropertiesEventBus:C96584B6-F00A-464E-AD19-53AFF4B05118","path":"uni-prop-local-properties-approval/SsmParameterValue:--uni-prop--local--UnicornPropertiesEventBus:C96584B6-F00A-464E-AD19-53AFF4B05118","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":[]}},"PropertiesEventBus":{"id":"PropertiesEventBus","path":"uni-prop-local-properties-approval/PropertiesEventBus","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":[]}},"SsmParameterValue:--uni-prop--local--ContractStatusTableName:C96584B6-F00A-464E-AD19-53AFF4B05118.Parameter":{"id":"SsmParameterValue:--uni-prop--local--ContractStatusTableName:C96584B6-F00A-464E-AD19-53AFF4B05118.Parameter","path":"uni-prop-local-properties-approval/SsmParameterValue:--uni-prop--local--ContractStatusTableName:C96584B6-F00A-464E-AD19-53AFF4B05118.Parameter","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.201.0"}},"SsmParameterValue:--uni-prop--local--ContractStatusTableName:C96584B6-F00A-464E-AD19-53AFF4B05118":{"id":"SsmParameterValue:--uni-prop--local--ContractStatusTableName:C96584B6-F00A-464E-AD19-53AFF4B05118","path":"uni-prop-local-properties-approval/SsmParameterValue:--uni-prop--local--ContractStatusTableName:C96584B6-F00A-464E-AD19-53AFF4B05118","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":[]}},"ContractStatusTable":{"id":"ContractStatusTable","path":"uni-prop-local-properties-approval/ContractStatusTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.TableBaseV2","version":"2.201.0","metadata":[]}},"SsmParameterValue:--uni-prop--local--PropertiesApprovalSyncFunctionIamRoleArn:C96584B6-F00A-464E-AD19-53AFF4B05118.Parameter":{"id":"SsmParameterValue:--uni-prop--local--PropertiesApprovalSyncFunctionIamRoleArn:C96584B6-F00A-464E-AD19-53AFF4B05118.Parameter","path":"uni-prop-local-properties-approval/SsmParameterValue:--uni-prop--local--PropertiesApprovalSyncFunctionIamRoleArn:C96584B6-F00A-464E-AD19-53AFF4B05118.Parameter","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.201.0"}},"SsmParameterValue:--uni-prop--local--PropertiesApprovalSyncFunctionIamRoleArn:C96584B6-F00A-464E-AD19-53AFF4B05118":{"id":"SsmParameterValue:--uni-prop--local--PropertiesApprovalSyncFunctionIamRoleArn:C96584B6-F00A-464E-AD19-53AFF4B05118","path":"uni-prop-local-properties-approval/SsmParameterValue:--uni-prop--local--PropertiesApprovalSyncFunctionIamRoleArn:C96584B6-F00A-464E-AD19-53AFF4B05118","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":[]}},"taskResponseFunctionRole":{"id":"taskResponseFunctionRole","path":"uni-prop-local-properties-approval/taskResponseFunctionRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":[]},"children":{"workflowPermissions":{"id":"workflowPermissions","path":"uni-prop-local-properties-approval/taskResponseFunctionRole/workflowPermissions","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"uni-prop-local-properties-approval/taskResponseFunctionRole/workflowPermissions/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["states:SendTaskFailure","states:SendTaskHeartbeat","states:SendTaskSuccess"],"Effect":"Allow","Resource":{"Ref":"ApprovalStateMachine767589AA"}}],"Version":"2012-10-17"},"policyName":"workflowPermissions","roles":[{"Fn::Select":[1,{"Fn::Split":["/",{"Fn::Select":[5,{"Fn::Split":[":",{"Ref":"SsmParameterValueuniproplocalPropertiesApprovalSyncFunctionIamRoleArnC96584B6F00A464EAD1953AFF4B05118Parameter"}]}]}]}]}]}}}}}}},"UnicornPropertiesApprovalStackPowerToolsLayer":{"id":"UnicornPropertiesApprovalStackPowerToolsLayer","path":"uni-prop-local-properties-approval/UnicornPropertiesApprovalStackPowerToolsLayer","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":[]}},"WaitForContractApprovalFunctionLogGroup":{"id":"WaitForContractApprovalFunctionLogGroup","path":"uni-prop-local-properties-approval/WaitForContractApprovalFunctionLogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"uni-prop-local-properties-approval/WaitForContractApprovalFunctionLogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"retentionInDays":1,"tags":[{"key":"namespace","value":"unicorn.properties"},{"key":"project","value":"AWS Serverless Developer Experience"},{"key":"stage","value":"local"}]}}}}},"WaitForContractApprovalFunction-local":{"id":"WaitForContractApprovalFunction-local","path":"uni-prop-local-properties-approval/WaitForContractApprovalFunction-local","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.201.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"uni-prop-local-properties-approval/WaitForContractApprovalFunction-local/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"uni-prop-local-properties-approval/WaitForContractApprovalFunction-local/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":[]}},"Resource":{"id":"Resource","path":"uni-prop-local-properties-approval/WaitForContractApprovalFunction-local/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"namespace","value":"unicorn.properties"},{"key":"project","value":"AWS Serverless Developer Experience"},{"key":"stage","value":"local"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"uni-prop-local-properties-approval/WaitForContractApprovalFunction-local/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"uni-prop-local-properties-approval/WaitForContractApprovalFunction-local/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":{"Fn::Join":["",["arn:aws:dynamodb:eu-central-1:491085425146:table/",{"Ref":"SsmParameterValueuniproplocalContractStatusTableNameC96584B6F00A464EAD1953AFF4B05118Parameter"}]]}}],"Version":"2012-10-17"},"policyName":"WaitForContractApprovalFunctionlocalServiceRoleDefaultPolicy54D250C0","roles":[{"Ref":"WaitForContractApprovalFunctionlocalServiceRole53F34F6C"}]}}}}}}},"Code":{"id":"Code","path":"uni-prop-local-properties-approval/WaitForContractApprovalFunction-local/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"uni-prop-local-properties-approval/WaitForContractApprovalFunction-local/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"uni-prop-local-properties-approval/WaitForContractApprovalFunction-local/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"uni-prop-local-properties-approval/WaitForContractApprovalFunction-local/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-491085425146-eu-central-1","s3Key":"a5ff454d353fbdeee4d841897d4ef58a793fdb423d0bb795170826dd4b93c15e.zip"},"environment":{"variables":{"TABLE_NAME":{"Ref":"SsmParameterValueuniproplocalContractStatusTableNameC96584B6F00A464EAD1953AFF4B05118Parameter"},"STAGE":"local","SERVICE_NAMESPACE":"unicorn.properties"}},"handler":"properties_service.wait_for_contract_approval_function.lambda_handler","layers":[{"Fn::Join":["",["arn:aws:lambda:",{"Ref":"AWS::Region"},":017000801446:layer:AWSLambdaPowertoolsPythonV3-python313-x86_64:4"]]}],"loggingConfig":{"logGroup":{"Ref":"WaitForContractApprovalFunctionLogGroupE248A777"}},"role":{"Fn::GetAtt":["WaitForContractApprovalFunctionlocalServiceRole53F34F6C","Arn"]},"runtime":"python3.13","tags":[{"key":"namespace","value":"unicorn.properties"},{"key":"project","value":"AWS Serverless Developer Experience"},{"key":"stage","value":"local"}]}}}}},"WaitForContractApprovalFunctionName":{"id":"WaitForContractApprovalFunctionName","path":"uni-prop-local-properties-approval/WaitForContractApprovalFunctionName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.201.0"}},"WaitForContractApprovalFunctionArn":{"id":"WaitForContractApprovalFunctionArn","path":"uni-prop-local-properties-approval/WaitForContractApprovalFunctionArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.201.0"}},"SsmParameterValue:--uni-prop--local--ImagesBucket:C96584B6-F00A-464E-AD19-53AFF4B05118.Parameter":{"id":"SsmParameterValue:--uni-prop--local--ImagesBucket:C96584B6-F00A-464E-AD19-53AFF4B05118.Parameter","path":"uni-prop-local-properties-approval/SsmParameterValue:--uni-prop--local--ImagesBucket:C96584B6-F00A-464E-AD19-53AFF4B05118.Parameter","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.201.0"}},"SsmParameterValue:--uni-prop--local--ImagesBucket:C96584B6-F00A-464E-AD19-53AFF4B05118":{"id":"SsmParameterValue:--uni-prop--local--ImagesBucket:C96584B6-F00A-464E-AD19-53AFF4B05118","path":"uni-prop-local-properties-approval/SsmParameterValue:--uni-prop--local--ImagesBucket:C96584B6-F00A-464E-AD19-53AFF4B05118","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":[]}},"ApprovalStateMachineLogGroup":{"id":"ApprovalStateMachineLogGroup","path":"uni-prop-local-properties-approval/ApprovalStateMachineLogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.201.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"uni-prop-local-properties-approval/ApprovalStateMachineLogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":"/aws/vendedlogs/states/uni-prop-local-unicorn.properties-ApprovalStateMachine","retentionInDays":1,"tags":[{"key":"namespace","value":"unicorn.properties"},{"key":"project","value":"AWS Serverless Developer Experience"},{"key":"stage","value":"local"}]}}}}},"StateMachineRole":{"id":"StateMachineRole","path":"uni-prop-local-properties-approval/StateMachineRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[]},"children":{"ImportStateMachineRole":{"id":"ImportStateMachineRole","path":"uni-prop-local-properties-approval/StateMachineRole/ImportStateMachineRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":[]}},"Resource":{"id":"Resource","path":"uni-prop-local-properties-approval/StateMachineRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"states.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/AWSXRayDaemonWriteAccess"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/ComprehendFullAccess"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/AmazonRekognitionFullAccess"]]}],"policies":[{"policyName":"CloudWatchPublishLogsMetrics","policyDocument":{"Statement":[{"Action":["cloudwatch:PutMetricData","logs:CreateLogDelivery","logs:DeleteLogDelivery","logs:DescribeLogGroups","logs:DescribeResourcePolicies","logs:GetLogDelivery","logs:ListLogDeliveries","logs:PutResourcePolicy","logs:UpdateLogDelivery"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"}},{"policyName":"S3ReadPolicy","policyDocument":{"Statement":[{"Action":"s3:Get*","Effect":"Allow","Resource":{"Fn::Join":["",["arn:aws:s3:::",{"Ref":"SsmParameterValueuniproplocalImagesBucketC96584B6F00A464EAD1953AFF4B05118Parameter"},"/*"]]}}],"Version":"2012-10-17"}}],"tags":[{"key":"namespace","value":"unicorn.properties"},{"key":"project","value":"AWS Serverless Developer Experience"},{"key":"stage","value":"local"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"uni-prop-local-properties-approval/StateMachineRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"uni-prop-local-properties-approval/StateMachineRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:CreateLogDelivery","logs:DeleteLogDelivery","logs:DescribeLogGroups","logs:DescribeResourcePolicies","logs:GetLogDelivery","logs:ListLogDeliveries","logs:PutResourcePolicy","logs:UpdateLogDelivery","xray:GetSamplingRules","xray:GetSamplingTargets","xray:PutTelemetryRecords","xray:PutTraceSegments"],"Effect":"Allow","Resource":"*"},{"Action":["dynamodb:BatchGetItem","dynamodb:ConditionCheckItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:Scan"],"Effect":"Allow","Resource":{"Fn::Join":["",["arn:aws:dynamodb:eu-central-1:491085425146:table/",{"Ref":"SsmParameterValueuniproplocalContractStatusTableNameC96584B6F00A464EAD1953AFF4B05118Parameter"}]]}},{"Action":"events:PutEvents","Effect":"Allow","Resource":{"Fn::Join":["",["arn:aws:events:eu-central-1:491085425146:event-bus/",{"Ref":"SsmParameterValueuniproplocalUnicornPropertiesEventBusC96584B6F00A464EAD1953AFF4B05118Parameter"}]]}},{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["WaitForContractApprovalFunctionlocalB37F63DE","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["WaitForContractApprovalFunctionlocalB37F63DE","Arn"]},":*"]]}]}],"Version":"2012-10-17"},"policyName":"StateMachineRoleDefaultPolicy433448B5","roles":[{"Ref":"StateMachineRole78EC082E"}]}}}}}}},"ApprovalStateMachine":{"id":"ApprovalStateMachine","path":"uni-prop-local-properties-approval/ApprovalStateMachine","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.StateMachine","version":"2.201.0","metadata":[]},"children":{"DefinitionBody":{"id":"DefinitionBody","path":"uni-prop-local-properties-approval/ApprovalStateMachine/DefinitionBody","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.201.0"},"children":{"Stage":{"id":"Stage","path":"uni-prop-local-properties-approval/ApprovalStateMachine/DefinitionBody/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.201.0"}},"AssetBucket":{"id":"AssetBucket","path":"uni-prop-local-properties-approval/ApprovalStateMachine/DefinitionBody/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.201.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"uni-prop-local-properties-approval/ApprovalStateMachine/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.CfnStateMachine","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::StepFunctions::StateMachine","aws:cdk:cloudformation:props":{"definitionS3Location":{"bucket":"cdk-hnb659fds-assets-491085425146-eu-central-1","key":"42520ec91d8a1ec449d8170a2a2221cb21220ef1b3b5dcb49f12d9048bd807a5.yaml"},"definitionSubstitutions":{"WaitForContractApprovalArn":{"Fn::GetAtt":["WaitForContractApprovalFunctionlocalB37F63DE","Arn"]},"TableName":{"Ref":"SsmParameterValueuniproplocalContractStatusTableNameC96584B6F00A464EAD1953AFF4B05118Parameter"},"ImageUploadBucketName":{"Ref":"SsmParameterValueuniproplocalImagesBucketC96584B6F00A464EAD1953AFF4B05118Parameter"},"EventBusName":{"Ref":"SsmParameterValueuniproplocalUnicornPropertiesEventBusC96584B6F00A464EAD1953AFF4B05118Parameter"},"ServiceName":"unicorn.properties"},"loggingConfiguration":{"destinations":[{"cloudWatchLogsLogGroup":{"logGroupArn":{"Fn::GetAtt":["ApprovalStateMachineLogGroup753A8F54","Arn"]}}}],"includeExecutionData":true,"level":"ALL"},"roleArn":{"Fn::GetAtt":["StateMachineRole78EC082E","Arn"]},"stateMachineName":"uni-prop-local-properties-approval-ApprovalStateMachine","tags":[{"key":"namespace","value":"unicorn.properties"},{"key":"project","value":"AWS Serverless Developer Experience"},{"key":"stage","value":"local"}],"tracingConfiguration":{"enabled":true}}}},"EventsRole":{"id":"EventsRole","path":"uni-prop-local-properties-approval/ApprovalStateMachine/EventsRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[]},"children":{"ImportEventsRole":{"id":"ImportEventsRole","path":"uni-prop-local-properties-approval/ApprovalStateMachine/EventsRole/ImportEventsRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":[]}},"Resource":{"id":"Resource","path":"uni-prop-local-properties-approval/ApprovalStateMachine/EventsRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"events.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"namespace","value":"unicorn.properties"},{"key":"project","value":"AWS Serverless Developer Experience"},{"key":"stage","value":"local"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"uni-prop-local-properties-approval/ApprovalStateMachine/EventsRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"uni-prop-local-properties-approval/ApprovalStateMachine/EventsRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"states:StartExecution","Effect":"Allow","Resource":{"Ref":"ApprovalStateMachine767589AA"}}],"Version":"2012-10-17"},"policyName":"ApprovalStateMachineEventsRoleDefaultPolicy94B86841","roles":[{"Ref":"ApprovalStateMachineEventsRole83695FBF"}]}}}}}}}}},"WorkflowEventsDlq":{"id":"WorkflowEventsDlq","path":"uni-prop-local-properties-approval/WorkflowEventsDlq","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.Queue","version":"2.201.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"uni-prop-local-properties-approval/WorkflowEventsDlq/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueue","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::Queue","aws:cdk:cloudformation:props":{"messageRetentionPeriod":1209600,"queueName":"WorkflowEventsDlq-local","sqsManagedSseEnabled":true,"tags":[{"key":"namespace","value":"unicorn.properties"},{"key":"project","value":"AWS Serverless Developer Experience"},{"key":"stage","value":"local"}]}}},"Policy":{"id":"Policy","path":"uni-prop-local-properties-approval/WorkflowEventsDlq/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.QueuePolicy","version":"2.201.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"uni-prop-local-properties-approval/WorkflowEventsDlq/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueuePolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::QueuePolicy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"sqs:SendMessage","Condition":{"ArnEquals":{"aws:SourceArn":{"Fn::GetAtt":["unicornpropertiesPublicationApprovalRequested1AA17865","Arn"]}}},"Effect":"Allow","Principal":{"Service":"events.amazonaws.com"},"Resource":{"Fn::GetAtt":["WorkflowEventsDlq0B51C5BE","Arn"]},"Sid":"AllowEventRuleuniproplocalpropertiesapprovalunicornpropertiesPublicationApprovalRequested1F19ECEB"}],"Version":"2012-10-17"},"queues":[{"Ref":"WorkflowEventsDlq0B51C5BE"}]}}}}}}},"unicorn.properties-PublicationApprovalRequested":{"id":"unicorn.properties-PublicationApprovalRequested","path":"uni-prop-local-properties-approval/unicorn.properties-PublicationApprovalRequested","constructInfo":{"fqn":"aws-cdk-lib.aws_events.Rule","version":"2.201.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"uni-prop-local-properties-approval/unicorn.properties-PublicationApprovalRequested/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnRule","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::Rule","aws:cdk:cloudformation:props":{"description":"PublicationApprovalRequested events published by the unicorn.web service.","eventBusName":{"Ref":"SsmParameterValueuniproplocalUnicornPropertiesEventBusC96584B6F00A464EAD1953AFF4B05118Parameter"},"eventPattern":{"detail-type":["PublicationApprovalRequested"],"source":["unicorn.web"]},"name":"unicorn.properties-PublicationApprovalRequested","state":"ENABLED","targets":[{"id":"Target0","arn":{"Ref":"ApprovalStateMachine767589AA"},"roleArn":{"Fn::GetAtt":["ApprovalStateMachineEventsRole83695FBF","Arn"]},"deadLetterConfig":{"arn":{"Fn::GetAtt":["WorkflowEventsDlq0B51C5BE","Arn"]}},"retryPolicy":{"maximumRetryAttempts":5,"maximumEventAgeInSeconds":900}}]}}}}},"PublicationEvaluationCompletedSchema":{"id":"PublicationEvaluationCompletedSchema","path":"uni-prop-local-properties-approval/PublicationEvaluationCompletedSchema","constructInfo":{"fqn":"aws-cdk-lib.aws_eventschemas.CfnSchema","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EventSchemas::Schema","aws:cdk:cloudformation:props":{"content":"{\"openapi\": \"3.0.0\", \"info\": {\"version\": \"1.0.0\", \"title\": \"PublicationEvaluationCompleted\"}, \"paths\": {}, \"components\": {\"schemas\": {\"AWSEvent\": {\"type\": \"object\", \"required\": [\"detail-type\", \"resources\", \"detail\", \"id\", \"source\", \"time\", \"region\", \"version\", \"account\"], \"x-amazon-events-detail-type\": \"PublicationEvaluationCompleted\", \"x-amazon-events-source\": \"unicorn.web\", \"properties\": {\"detail\": {\"$ref\": \"#/components/schemas/PublicationEvaluationCompleted\"}, \"account\": {\"type\": \"string\"}, \"detail-type\": {\"type\": \"string\"}, \"id\": {\"type\": \"string\"}, \"region\": {\"type\": \"string\"}, \"resources\": {\"type\": \"array\", \"items\": {\"type\": \"string\"}}, \"source\": {\"type\": \"string\"}, \"time\": {\"type\": \"string\", \"format\": \"date-time\"}, \"version\": {\"type\": \"string\"}}}, \"PublicationEvaluationCompleted\": {\"type\": \"object\", \"required\": [\"property_id\", \"evaluation_result\"], \"properties\": {\"property_id\": {\"type\": \"string\"}, \"evaluation_result\": {\"type\": \"string\"}}}}}}","description":"The schema for when a property evaluation is completed","registryName":"unicorn.properties-local","schemaName":"unicorn.properties@PublicationEvaluationCompleted","tags":[{"key":"namespace","value":"unicorn.properties"},{"key":"project","value":"AWS Serverless Developer Experience"},{"key":"stage","value":"local"}],"type":"OpenApi3"}}},"ApprovalStateMachineLogGroupName":{"id":"ApprovalStateMachineLogGroupName","path":"uni-prop-local-properties-approval/ApprovalStateMachineLogGroupName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.201.0"}},"ApprovalStateMachineName":{"id":"ApprovalStateMachineName","path":"uni-prop-local-properties-approval/ApprovalStateMachineName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.201.0"}},"ApprovalStateMachineArn":{"id":"ApprovalStateMachineArn","path":"uni-prop-local-properties-approval/ApprovalStateMachineArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.201.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"uni-prop-local-properties-approval/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"uni-prop-local-properties-approval/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.201.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"uni-prop-local-properties-approval/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.201.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"uni-prop-local-properties-approval/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.201.0"}}}},"uni-prop-local-properties-integration-with-contracts":{"id":"uni-prop-local-properties-integration-with-contracts","path":"uni-prop-local-properties-integration-with-contracts","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.201.0"},"children":{"SsmParameterValue:--uni-prop--local--UnicornPropertiesEventBus:C96584B6-F00A-464E-AD19-53AFF4B05118.Parameter":{"id":"SsmParameterValue:--uni-prop--local--UnicornPropertiesEventBus:C96584B6-F00A-464E-AD19-53AFF4B05118.Parameter","path":"uni-prop-local-properties-integration-with-contracts/SsmParameterValue:--uni-prop--local--UnicornPropertiesEventBus:C96584B6-F00A-464E-AD19-53AFF4B05118.Parameter","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.201.0"}},"SsmParameterValue:--uni-prop--local--UnicornPropertiesEventBus:C96584B6-F00A-464E-AD19-53AFF4B05118":{"id":"SsmParameterValue:--uni-prop--local--UnicornPropertiesEventBus:C96584B6-F00A-464E-AD19-53AFF4B05118","path":"uni-prop-local-properties-integration-with-contracts/SsmParameterValue:--uni-prop--local--UnicornPropertiesEventBus:C96584B6-F00A-464E-AD19-53AFF4B05118","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":[]}},"PropertiesEventBus":{"id":"PropertiesEventBus","path":"uni-prop-local-properties-integration-with-contracts/PropertiesEventBus","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":[]}},"unicorn-properties-ContractStatusChangedSubscription":{"id":"unicorn-properties-ContractStatusChangedSubscription","path":"uni-prop-local-properties-integration-with-contracts/unicorn-properties-ContractStatusChangedSubscription","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"publisherEventBus":{"id":"publisherEventBus","path":"uni-prop-local-properties-integration-with-contracts/unicorn-properties-ContractStatusChangedSubscription/publisherEventBus","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":[]}},"unicorn.contracts-ContractStatusChanged":{"id":"unicorn.contracts-ContractStatusChanged","path":"uni-prop-local-properties-integration-with-contracts/unicorn-properties-ContractStatusChangedSubscription/unicorn.contracts-ContractStatusChanged","constructInfo":{"fqn":"aws-cdk-lib.aws_events.Rule","version":"2.201.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"uni-prop-local-properties-integration-with-contracts/unicorn-properties-ContractStatusChangedSubscription/unicorn.contracts-ContractStatusChanged/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnRule","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::Rule","aws:cdk:cloudformation:props":{"description":"Subscription to ContractStatusChanged events by the unicorn.properties service.","eventBusName":"UnicornContractsBus-local","eventPattern":{"detail-type":["ContractStatusChanged"],"source":["unicorn.contracts"]},"name":"unicorn.contracts-ContractStatusChanged","state":"ENABLED","targets":[{"id":"Target0","arn":{"Fn::Join":["",["arn:aws:events:eu-central-1:491085425146:event-bus/",{"Ref":"SsmParameterValueuniproplocalUnicornPropertiesEventBusC96584B6F00A464EAD1953AFF4B05118Parameter"}]]},"roleArn":{"Fn::GetAtt":["unicornpropertiesContractStatusChangedSubscriptionunicorncontractsContractStatusChangedEventsRole2214B720","Arn"]}}]}}},"EventsRole":{"id":"EventsRole","path":"uni-prop-local-properties-integration-with-contracts/unicorn-properties-ContractStatusChangedSubscription/unicorn.contracts-ContractStatusChanged/EventsRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[]},"children":{"ImportEventsRole":{"id":"ImportEventsRole","path":"uni-prop-local-properties-integration-with-contracts/unicorn-properties-ContractStatusChangedSubscription/unicorn.contracts-ContractStatusChanged/EventsRole/ImportEventsRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":[]}},"Resource":{"id":"Resource","path":"uni-prop-local-properties-integration-with-contracts/unicorn-properties-ContractStatusChangedSubscription/unicorn.contracts-ContractStatusChanged/EventsRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"events.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"namespace","value":"unicorn.properties"},{"key":"project","value":"AWS Serverless Developer Experience"},{"key":"stage","value":"local"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"uni-prop-local-properties-integration-with-contracts/unicorn-properties-ContractStatusChangedSubscription/unicorn.contracts-ContractStatusChanged/EventsRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"uni-prop-local-properties-integration-with-contracts/unicorn-properties-ContractStatusChangedSubscription/unicorn.contracts-ContractStatusChanged/EventsRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"events:PutEvents","Effect":"Allow","Resource":{"Fn::Join":["",["arn:aws:events:eu-central-1:491085425146:event-bus/",{"Ref":"SsmParameterValueuniproplocalUnicornPropertiesEventBusC96584B6F00A464EAD1953AFF4B05118Parameter"}]]}}],"Version":"2012-10-17"},"policyName":"unicornpropertiesContractStatusChangedSubscriptionunicorncontractsContractStatusChangedEventsRoleDefaultPolicy914967C0","roles":[{"Ref":"unicornpropertiesContractStatusChangedSubscriptionunicorncontractsContractStatusChangedEventsRole2214B720"}]}}}}}}}}}}},"CDKMetadata":{"id":"CDKMetadata","path":"uni-prop-local-properties-integration-with-contracts/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"uni-prop-local-properties-integration-with-contracts/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.201.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"uni-prop-local-properties-integration-with-contracts/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.201.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"uni-prop-local-properties-integration-with-contracts/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.201.0"}}}},"uni-prop-local-properties-integration-with-web":{"id":"uni-prop-local-properties-integration-with-web","path":"uni-prop-local-properties-integration-with-web","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.201.0"},"children":{"SsmParameterValue:--uni-prop--local--UnicornPropertiesEventBus:C96584B6-F00A-464E-AD19-53AFF4B05118.Parameter":{"id":"SsmParameterValue:--uni-prop--local--UnicornPropertiesEventBus:C96584B6-F00A-464E-AD19-53AFF4B05118.Parameter","path":"uni-prop-local-properties-integration-with-web/SsmParameterValue:--uni-prop--local--UnicornPropertiesEventBus:C96584B6-F00A-464E-AD19-53AFF4B05118.Parameter","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.201.0"}},"SsmParameterValue:--uni-prop--local--UnicornPropertiesEventBus:C96584B6-F00A-464E-AD19-53AFF4B05118":{"id":"SsmParameterValue:--uni-prop--local--UnicornPropertiesEventBus:C96584B6-F00A-464E-AD19-53AFF4B05118","path":"uni-prop-local-properties-integration-with-web/SsmParameterValue:--uni-prop--local--UnicornPropertiesEventBus:C96584B6-F00A-464E-AD19-53AFF4B05118","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":[]}},"PropertiesEventBus":{"id":"PropertiesEventBus","path":"uni-prop-local-properties-integration-with-web/PropertiesEventBus","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":[]}},"unicorn.properies-PublicationApprovalRequestedSubscription":{"id":"unicorn.properies-PublicationApprovalRequestedSubscription","path":"uni-prop-local-properties-integration-with-web/unicorn.properies-PublicationApprovalRequestedSubscription","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"publisherEventBus":{"id":"publisherEventBus","path":"uni-prop-local-properties-integration-with-web/unicorn.properies-PublicationApprovalRequestedSubscription/publisherEventBus","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":[]}},"unicorn.web-PublicationApprovalRequested":{"id":"unicorn.web-PublicationApprovalRequested","path":"uni-prop-local-properties-integration-with-web/unicorn.properies-PublicationApprovalRequestedSubscription/unicorn.web-PublicationApprovalRequested","constructInfo":{"fqn":"aws-cdk-lib.aws_events.Rule","version":"2.201.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"uni-prop-local-properties-integration-with-web/unicorn.properies-PublicationApprovalRequestedSubscription/unicorn.web-PublicationApprovalRequested/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnRule","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::Rule","aws:cdk:cloudformation:props":{"description":"Subscription to PublicationApprovalRequested events by the unicorn.properties service.","eventBusName":"UnicornWebBus-local","eventPattern":{"detail-type":["PublicationApprovalRequested"],"source":["unicorn.web"]},"name":"unicorn.web-PublicationApprovalRequested","state":"ENABLED","targets":[{"id":"Target0","arn":{"Fn::Join":["",["arn:aws:events:eu-central-1:491085425146:event-bus/",{"Ref":"SsmParameterValueuniproplocalUnicornPropertiesEventBusC96584B6F00A464EAD1953AFF4B05118Parameter"}]]},"roleArn":{"Fn::GetAtt":["unicornproperiesPublicationApprovalRequestedSubscriptionunicornwebPublicationApprovalRequestedEventsRole453C1479","Arn"]}}]}}},"EventsRole":{"id":"EventsRole","path":"uni-prop-local-properties-integration-with-web/unicorn.properies-PublicationApprovalRequestedSubscription/unicorn.web-PublicationApprovalRequested/EventsRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.201.0","metadata":[]},"children":{"ImportEventsRole":{"id":"ImportEventsRole","path":"uni-prop-local-properties-integration-with-web/unicorn.properies-PublicationApprovalRequestedSubscription/unicorn.web-PublicationApprovalRequested/EventsRole/ImportEventsRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.201.0","metadata":[]}},"Resource":{"id":"Resource","path":"uni-prop-local-properties-integration-with-web/unicorn.properies-PublicationApprovalRequestedSubscription/unicorn.web-PublicationApprovalRequested/EventsRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"events.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"namespace","value":"unicorn.properties"},{"key":"project","value":"AWS Serverless Developer Experience"},{"key":"stage","value":"local"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"uni-prop-local-properties-integration-with-web/unicorn.properies-PublicationApprovalRequestedSubscription/unicorn.web-PublicationApprovalRequested/EventsRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.201.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"uni-prop-local-properties-integration-with-web/unicorn.properies-PublicationApprovalRequestedSubscription/unicorn.web-PublicationApprovalRequested/EventsRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.201.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"events:PutEvents","Effect":"Allow","Resource":{"Fn::Join":["",["arn:aws:events:eu-central-1:491085425146:event-bus/",{"Ref":"SsmParameterValueuniproplocalUnicornPropertiesEventBusC96584B6F00A464EAD1953AFF4B05118Parameter"}]]}}],"Version":"2012-10-17"},"policyName":"unicornproperiesPublicationApprovalRequestedSubscriptionunicornwebPublicationApprovalRequestedEventsRoleDefaultPolicy677AB177","roles":[{"Ref":"unicornproperiesPublicationApprovalRequestedSubscriptionunicornwebPublicationApprovalRequestedEventsRole453C1479"}]}}}}}}}}}}},"CDKMetadata":{"id":"CDKMetadata","path":"uni-prop-local-properties-integration-with-web/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"uni-prop-local-properties-integration-with-web/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.201.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"uni-prop-local-properties-integration-with-web/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.201.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"uni-prop-local-properties-integration-with-web/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.201.0"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}}}